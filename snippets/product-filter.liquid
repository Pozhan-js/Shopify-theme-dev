{%- style -%}
.filter-sidebar {
  position: fixed;
  top: 0;
  right: -400px;
  width: 400px;
  height: 100vh;
  background: white;
  box-shadow: -2px 0 10px rgba(0,0,0,0.1);
  transition: right 0.3s ease;
  padding: 2rem;
  overflow-y: auto;
  z-index: 1000;
}
.filter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}
.close-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  transform: scale(1.5);
  line-height: 1;
}
.filter-group {
  margin-bottom: 1rem;
}
.filter-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  padding: 0.5rem 0;
}
.filter-group-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}
.filter-group.active .filter-group-content {
  max-height: 500px;
}
.filter-sidebar.active {
  right: 0;
}
.filter-content h2, 
.filter-content h3 {
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  font-weight: 700;
  font-size: 2.2rem; /* 22px */
}
.filter-content ul {
  list-style: none;
  padding-left: 0;
}
.filter-content li {
  margin-bottom: 0.5rem;
  font-weight: 600;
  font-size: 1.8rem; /* 18px */
}
.filter-group-header span {
  font-size: 2.2rem; /* 22px */
  transform: scale(1.5);
  display: inline-block;
  line-height: 1;
}
.apply-btn {
  background: black;
  color: white;
  border: none;
  padding: 1rem;
  width: 100%;
  margin-top: 2rem;
  cursor: pointer;
}
{%- endstyle -%}

<div class="filter-content">
  <div class="filter-header">
    <h2>筛选</h2>
    <button class="close-btn" onclick="toggleFilter()">×</button>
  </div>

  <div class="filter-group">
    <div class="filter-group-header" onclick="toggleFilterGroup(this)">
      <h3>SORT BY</h3>
      <span>+</span>
    </div>
    <div class="filter-group-content">
      <ul>
        <li><input type="radio" name="sort" value="featured" checked> Featured</li>
        <li><input type="radio" name="sort" value="best-selling"> Best selling</li>
        <li><input type="radio" name="sort" value="a-z"> Alphabetically, A-Z</li>
        <li><input type="radio" name="sort" value="z-a"> Alphabetically, Z-A</li>
        <li><input type="radio" name="sort" value="price-low-high"> Price, low to high</li>
        <li><input type="radio" name="sort" value="price-high-low"> Price, high to low</li>
      </ul>
    </div>
  </div>

  <div class="filter-group">
    <div class="filter-group-header" onclick="toggleFilterGroup(this)">
      <h3>BRAND</h3>
      <span>+</span>
    </div>
    <div class="filter-group-content">
      <ul>
        {% for link in linklists.brands.links %}
          <li><input type="checkbox" name="brand" value="{{ link.title }}"> {{ link.title }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <div class="filter-group">
    <div class="filter-group-header" onclick="toggleFilterGroup(this)">
      <h3>SIZE</h3>
      <span>+</span>
    </div>
    <div class="filter-group-content">
      <ul>
        {% assign size_options = shop.metaobjects.standard_product_attributes.values | where: "definition_name", "尺寸" %}
        {% for size in size_options %}
          <li><input type="checkbox" name="size" value="{{ size.value }}"> {{ size.value }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <div class="filter-group">
    <div class="filter-group-header" onclick="toggleFilterGroup(this)">
      <h3>PRODUCT TYPE</h3>
      <span>+</span>
    </div>
    <div class="filter-group-content">
      <ul>
        {% for link in linklists.product-types.links %}
          <li><input type="checkbox" name="type" value="{{ link.title }}"> {{ link.title }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <div class="filter-group">
    <div class="filter-group-header" onclick="toggleFilterGroup(this)">
      <h3>COLOR</h3>
      <span>+</span>
    </div>
    <div class="filter-group-content">
      <ul>
        {% assign color_options = shop.metaobjects.standard_product_attributes.values | where: "definition_name", "颜色" %}
        {% for color in color_options %}
          <li><input type="checkbox" name="color" value="{{ color.system.name }}"> {{ color.system.name }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <button class="apply-btn" onclick="applyFilters()">SHOW RESULTS</button>
</div>

<script>
function toggleFilterGroup(header) {
  const group = header.parentElement;
  group.classList.toggle('active');
  const icon = header.querySelector('span');
  icon.textContent = group.classList.contains('active') ? '-' : '+';
}

function applyFilters() {
  // 实现过滤逻辑
  const selectedSort = document.querySelector('input[name="sort"]:checked').value;
  const selectedBrands = Array.from(document.querySelectorAll('input[name="brand"]:checked')).map(el => el.value);
  const selectedSizes = Array.from(document.querySelectorAll('input[name="size"]:checked')).map(el => el.value);
  const selectedTypes = Array.from(document.querySelectorAll('input[name="type"]:checked')).map(el => el.value);
  const selectedColors = Array.from(document.querySelectorAll('input[name="color"]:checked')).map(el => el.value);
  
  // 这里应该实现过滤逻辑并重新加载产品列表
  toggleFilter(); // 关闭过滤侧边栏
}
</script>
