
  <!-- 菜单数据调试 -->
  <div style="position:absolute; top:0; left:0; background:yellow; padding:5px; z-index:99999;">
    {% if section.settings.menu %}
      menu: {{ section.settings.menu | json }}
      Menu Handle: {{ section.settings.menu.handle | json }} | 
      Links: {{ section.settings.menu.links.size }}
    {% else %}
      WARNING: No menu assigned
    {% endif %}
  </div> 
  
 <ul class="vertical-menu__list">
    {%- if section.settings.menu -%}
      {%- for link in section.settings.menu.links -%}
      <li class="vertical-menu__item">
        <a href="{{ link.url }}" class="vertical-menu__link {% if link.links.size > 0 %}has-children{% endif %}">
          {{ link.title }}
        </a>
        
        {%- if link.links.size > 0 -%}
          <ul class="vertical-menu__submenu">
            {%- for childlink in link.links -%}
              <li class="vertical-menu__item">
                <a href="{{ childlink.url }}" class="vertical-menu__link {% if childlink.links.size > 0 %}has-children{% endif %}">
                  {{ childlink.title }}
                </a>
                
                {%- if childlink.links.size > 0 -%}
                  <ul class="vertical-menu__submenu">
                    {%- for grandchildlink in childlink.links -%}
                      <li class="vertical-menu__item">
                        <a href="{{ grandchildlink.url }}" class="vertical-menu__link">
                          {{ grandchildlink.title }}
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}
              </li>
            {%- endfor -%}
          </ul>
        {%- endif -%}
      </li>
    {%- endfor -%}
  </ul> 

{% schema %}
{
  "name": "Vertical Menu",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ],
      "name": "Vertical Menu",
      "category": "Navigation"
    }
  ]
}
{% endschema %}
