{% schema %}
{
  "name": "表格区块",
  "tag": "section",
  "class": "section",
  "max_blocks": 20,
  "settings": [
    {
      "type": "range",
      "id": "columns",
      "label": "列数",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 3
    },
    {
      "type": "checkbox",
      "id": "show_borders",
      "label": "显示表格边框",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "stripe_rows",
      "label": "斑马纹行",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "header",
      "name": "表头",
      "settings": [
        {
          "type": "text",
          "id": "col_1",
          "label": "列1标题",
          "default": "标题1"
        },
        {
          "type": "text",
          "id": "col_2",
          "label": "列2标题",
          "default": "标题2"
        },
        {
          "type": "text",
          "id": "col_3",
          "label": "列3标题",
          "default": "标题3"
        },
        {
          "type": "text",
          "id": "col_4",
          "label": "列4标题",
          "default": "标题4"
        },
        {
          "type": "text",
          "id": "col_5",
          "label": "列5标题",
          "default": "标题5"
        },
        {
          "type": "text",
          "id": "col_6",
          "label": "列6标题",
          "default": "标题6"
        },
        {
          "type": "text",
          "id": "col_7",
          "label": "列7标题",
          "default": "标题7"
        },
        {
          "type": "text",
          "id": "col_8",
          "label": "列8标题",
          "default": "标题8"
        },
        {
          "type": "text",
          "id": "col_9",
          "label": "列9标题",
          "default": "标题9"
        },
        {
          "type": "text",
          "id": "col_10",
          "label": "列10标题",
          "default": "标题10"
        }
      ]
    },
    {
      "type": "row",
      "name": "表格行",
      "settings": [
        {
          "type": "text",
          "id": "col_1",
          "label": "列1内容"
        },
        {
          "type": "url",
          "id": "col_1_link",
          "label": "列1链接"
        },
        {
          "type": "text",
          "id": "col_2",
          "label": "列2内容"
        },
        {
          "type": "url",
          "id": "col_2_link",
          "label": "列2链接"
        },
        {
          "type": "text",
          "id": "col_3",
          "label": "列3内容"
        },
        {
          "type": "url",
          "id": "col_3_link",
          "label": "列3链接"
        },
        {
          "type": "text",
          "id": "col_4",
          "label": "列4内容"
        },
        {
          "type": "url",
          "id": "col_4_link",
          "label": "列4链接"
        },
        {
          "type": "text",
          "id": "col_5",
          "label": "列5内容"
        },
        {
          "type": "url",
          "id": "col_5_link",
          "label": "列5链接"
        },
        {
          "type": "text",
          "id": "col_6",
          "label": "列6内容"
        },
        {
          "type": "url",
          "id": "col_6_link",
          "label": "列6链接"
        },
        {
          "type": "text",
          "id": "col_7",
          "label": "列7内容"
        },
        {
          "type": "url",
          "id": "col_7_link",
          "label": "列7链接"
        },
        {
          "type": "text",
          "id": "col_8",
          "label": "列8内容"
        },
        {
          "type": "url",
          "id": "col_8_link",
          "label": "列8链接"
        },
        {
          "type": "text",
          "id": "col_9",
          "label": "列9内容"
        },
        {
          "type": "url",
          "id": "col_9_link",
          "label": "列9链接"
        },
        {
          "type": "text",
          "id": "col_10",
          "label": "列10内容"
        },
        {
          "type": "url",
          "id": "col_10_link",
          "label": "列10链接"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "表格区块",
      "blocks": [
        {
          "type": "header"
        },
        {
          "type": "row"
        },
        {
          "type": "row"
        },
        {
          "type": "row"
        }
      ]
    }
  ]
}
{% endschema %}

<style>
  .custom-section {
    padding: 0 50px;
  }
  .table-container {
    overflow-x: auto;
    margin: 20px 0;
  }

  .table-container table {
    width: 100%;
    {% if section.settings.show_borders %}
      border-collapse: collapse;
      border: 1px solid #ddd;
    {% else %}
      border: none;
    {% endif %}
  }

  .table-container th,
  .table-container td {
    {% if section.settings.show_borders %}
      border: 1px solid #ddd;
    {% endif %}
    padding: 12px;
    text-align: left;
  }

  .table-container th {
    background-color: #f2f2f2;
    font-weight: bold;
  }

  {% if section.settings.stripe_rows %}
    .table-container tr:nth-child(even) {
      background-color: #f9f9f9;
    }
  {% endif %}

  .table-container tr:hover {
    background-color: #f1f1f1;
  }
</style>

<div class="table-container custom-section">
  <table>
    {% for block in section.blocks %}
      {% if block.type == 'header' %}
        <thead>
          <tr>
            {% for i in (1..section.settings.columns) %}
              {% assign col_setting = 'col_' | append: i %}
              <th>{{ block.settings[col_setting] }}</th>
            {% endfor %}
          </tr>
        </thead>
      {% else %}
        <tbody>
          <tr>
            {% for i in (1..section.settings.columns) %}
              {% assign col_setting = 'col_' | append: i %}
              {% assign link_setting = 'col_' | append: i | append: '_link' %}
              <td>
                {% if block.settings[link_setting] != blank %}
                  <a href="{{ block.settings[link_setting] }}">{{ block.settings[col_setting] }}</a>
                {% else %}
                  {{ block.settings[col_setting] }}
                {% endif %}
              </td>
            {% endfor %}
          </tr>
        </tbody>
      {% endif %}
    {% endfor %}
  </table>
</div>
