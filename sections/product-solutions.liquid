<div class="exhibition-series-section">
  <div class="container">
    <!-- 标题区域 -->
    <div class="section-header">
      {% if section.settings.title != blank %}
        <h2 class="section-title">{{ section.settings.title }}</h2>
      {% endif %}
      {% if section.settings.description != blank %}
        <p class="section-description">{{ section.settings.description }}</p>
      {% endif %}
    </div>

    <!-- 展品系列网格 -->
    <div class="series-grid">
      {% assign series_limit = section.settings.series_limit | default: 12 %}
      {% for collection in collections limit: series_limit %}
        {% unless collection.handle == 'all' %}
          <div class="series-card">
            <div class="series-image">
              {% if collection.featured_image != blank %}
                <img
                  src="{{ collection.featured_image | img_url: '400x400' }}"
                  alt="{{ collection.title }}"
                  loading="lazy"
                >
              {% elsif collection.products.first.featured_image != blank %}
                <img
                  src="{{ collection.products.first.featured_image | img_url: '400x400' }}"
                  alt="{{ collection.title }}"
                  loading="lazy"
                >
              {% else %}
                <div class="placeholder-image">
                  <svg
                    width="100"
                    height="100"
                    viewBox="0 0 100 100"
                    fill="none"
                  >
                    <rect
                      width="100"
                      height="100"
                      fill="#f5f5f5" />
                    <path d="M30 40h40v20H30z" fill="#ddd" />
                    <circle cx="40" cy="30" r="5" fill="#ddd" />
                  </svg>
                </div>
              {% endif %}
              
            </div>

            <div class="series-content">
              {% if collection.title != blank %}
                <h3 class="series-title">{{ collection.title }}</h3>
              {% endif %}

              {% if collection.description != blank and section.settings.show_description %}
                <p class="series-description">
                  {{ collection.description | strip_html | truncate: section.settings.description_length }}
                </p>
              {% endif %}

              {% if section.settings.show_learn_more %}
                <div class="series-action">
                  <a href="{{ collection.url }}" class="learn-more-btn">
                    <svg
                      class="btn-arrow"
                      viewBox="0 0 7.10229 10.7302"
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                      width="7.102295"
                      height="10.730225"
                      fill="none"
                      customFrame="#000000"
                    >
                      <path
                        id="多边形 11"
                        d="M-0.384728 5.68065L4.9804 -0.782841L10.3455 5.68065L9.57607 6.31935L4.59567 0.31935L4.9804 0L5.36513 0.31935L0.384728 6.31935L-0.384728 5.68065Z"
                        fill="currentColor"
                        fill-opacity="1"
                        fill-rule="nonzero"
                        transform="matrix(0,1,-1,0,6.31934,0.384705)" />
                    </svg>
                    {{ section.settings.learn_more_text | default: '查看系列' }}
                  </a>
                </div>
              {% endif %}
            </div>
          </div>
        {% endunless %}
      {% endfor %}
    </div>

    <!-- 如果没有展品系列时的提示 -->
    {% if collections.size <= 1 %}
      <div class="empty-state">
        <div class="empty-icon">
          <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
            <rect width="80" height="80" rx="40" fill="#f8f8f8"/>
            <path d="M25 35h30v10H25z" fill="#ddd"/>
            <circle cx="35" cy="25" r="3" fill="#ddd"/>
          </svg>
        </div>
        <h3 class="empty-title">{{ section.settings.empty_title | default: '暂无展品系列' }}</h3>
        <p class="empty-description">{{ section.settings.empty_description | default: '请先创建展品系列以展示内容' }}</p>
      </div>
    {% endif %}
  </div>
</div>

<style>
  .exhibition-series-section {
    margin-top: calc({{ section.settings.margin_top }} * 100vw / 1920);
    margin-bottom: calc(119.53 * 100vw / 1920);
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
  }

  .container {
    max-width: 1300px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .section-header {
    text-align: center;
    margin-bottom: 60px;
  }

  .section-title {
    font-size: {{ section.settings.title_size }}px;
    font-weight: {{ section.settings.title_weight }};
    color: {{ section.settings.title_color }};
    margin: 0 0 20px;
    line-height: 1.2;
  }

  .section-description {
    color: rgba(22, 22, 22, 0.5);
    font-family: Poppins;
    font-size: 14px;
    font-weight: 400;
    line-height: 18px;
    letter-spacing: 0px;
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
    display: block;
    width: 100%;
  }

  .series-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: {{ section.settings.grid_gap }}px;
    margin-top: 40px;
  }

  .series-card {
    background: {{ section.settings.card_background | default: '#F1F0ED' }};
    border-radius: {{ section.settings.card_border_radius }}px;
    padding: {{ section.settings.card_padding }}px;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid {{ section.settings.card_border_color }};
    position: relative;
    overflow: hidden;
  }

  .series-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
  }

  .series-image {
    margin-bottom: 30px;
    height: 250px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    border-radius: 8px;
  }

  .series-image img {
    max-width: 100%;
    max-height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .series-card:hover .series-image img {
    transform: scale(1.05);
  }

  .placeholder-image {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f8f8f8;
    border-radius: 8px;
  }


  .series-title {
    font-size: {{ section.settings.series_title_size }}px;
    font-weight: {{ section.settings.series_title_weight }};
    color: {{ section.settings.series_title_color }};
    margin: 0 0 15px;
    text-transform: uppercase;
    letter-spacing: 1px;
    line-height: 1.3;
  }

  .series-description {
    font-size: {{ section.settings.series_description_size }}px;
    color: {{ section.settings.series_description_color }};
    line-height: 1.5;
    margin: 0 0 25px;
    text-align: left;
  }

  .learn-more-btn {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    padding: 12px 24px;
    background: transparent;
    border: 2px solid {{ section.settings.button_border_color }};
    color: {{ section.settings.button_text_color }};
    text-decoration: none;
    font-size: {{ section.settings.button_text_size }}px;
    font-weight: {{ section.settings.button_text_weight }};
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: color 0.3s ease, transform 0.3s ease;
    border-radius: 4px;
  }

  .learn-more-btn::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: {{ section.settings.button_hover_bg | default: '#C22E35' }};
    transition: left 0.3s ease;
    z-index: -1;
  }

  .btn-arrow {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }

  .learn-more-btn:hover::after {
    left: 0;
  }

  .learn-more-btn:hover {
    color: {{ section.settings.button_hover_text }};
    transform: translateY(-2px);
  }

  .learn-more-btn:hover .btn-arrow {
    transform: translateX(3px);
  }

  /* 空状态样式 */
  .empty-state {
    text-align: center;
    padding: 80px 20px;
    color: #666;
  }

  .empty-icon {
    margin-bottom: 24px;
  }

  .empty-title {
    font-size: 24px;
    font-weight: 600;
    margin: 0 0 12px;
    color: #333;
  }

  .empty-description {
    font-size: 16px;
    margin: 0;
    color: #666;
  }

  /* 响应式设计 */
  @media (max-width: 1200px) {
    .exhibition-series-section {
      margin-bottom: calc(119.53 * 0.8 * 100vw / 1920);
      padding: {{ section.settings.padding_top | times: 0.8 | round }}px 0 {{ section.settings.padding_bottom | times: 0.8 | round }}px;
    }
  }

  @media (max-width: 768px) {
    .exhibition-series-section {
      margin-bottom: calc(119.53 * 0.6 * 100vw / 1920);
      padding: {{ section.settings.padding_top | times: 0.6 | round }}px 0 {{ section.settings.padding_bottom | times: 0.6 | round }}px;
    }

    .series-grid {
      grid-template-columns: 1fr;
      gap: 30px;
    }

    .section-title {
      font-size: {{ section.settings.title_size | minus: 8 }}px;
    }

    .section-description {
      font-size: {{ section.settings.description_size | minus: 2 }}px;
    }

    .series-description {
      text-align: center;
    }
  }

  @media (max-width: 480px) {
    .exhibition-series-section {
      margin-bottom: calc(119.53 * 0.5 * 100vw / 1920);
      padding: {{ section.settings.padding_top | times: 0.5 | round }}px 0 {{ section.settings.padding_bottom | times: 0.5 | round }}px;
    }

    .container {
      padding: 0 15px;
    }

    .series-card {
      padding: {{ section.settings.card_padding | minus: 10 }}px;
    }

    .series-image {
      height: 200px;
    }

    .empty-state {
      padding: 60px 20px;
    }
  }
</style>

{% schema %}
{
  "name": "展品系列展示",
  "tag": "section",
  "class": "exhibition-series",
  "settings": [
    {
      "type": "header",
      "content": "标题设置"
    },
    {
      "type": "text",
      "id": "title",
      "label": "标题",
      "default": "展品系列"
    },
    {
      "type": "range",
      "id": "title_size",
      "label": "标题字体大小",
      "min": 24,
      "max": 48,
      "step": 2,
      "default": 36,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "标题字体粗细",
      "options": [
        {
          "value": "300",
          "label": "细体"
        },
        {
          "value": "400",
          "label": "正常"
        },
        {
          "value": "500",
          "label": "中等"
        },
        {
          "value": "600",
          "label": "半粗"
        },
        {
          "value": "700",
          "label": "粗体"
        }
      ],
      "default": "600"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "标题颜色",
      "default": "#333333"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "描述文本",
      "default": "探索我们精心策划的展品系列，每个系列都代表着独特的主题和故事。"
    },
    {
      "type": "range",
      "id": "description_size",
      "label": "描述字体大小",
      "min": 14,
      "max": 20,
      "step": 1,
      "default": 16,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "描述颜色",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "系列设置"
    },
    {
      "type": "range",
      "id": "series_limit",
      "label": "显示系列数量",
      "min": 4,
      "max": 24,
      "step": 2,
      "default": 12,
      "info": "设置要显示的展品系列数量"
    },
    {
      "type": "checkbox",
      "id": "show_learn_more",
      "label": "显示查看系列按钮",
      "default": true
    },
    {
      "type": "text",
      "id": "learn_more_text",
      "label": "按钮文字",
      "default": "查看系列"
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "label": "显示系列描述",
      "default": true
    },
    {
      "type": "range",
      "id": "description_length",
      "label": "描述文字长度",
      "min": 50,
      "max": 200,
      "step": 10,
      "default": 100,
      "info": "系列描述的最大字符数"
    },
    {
      "type": "header",
      "content": "布局设置"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "背景颜色",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "与上个模块距离",
      "min": 0,
      "max": 200,
      "step": 5,
      "default": 115,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "内容顶部间距",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 0,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "底部间距",
      "min": 0,
      "max": 200,
      "step": 5,
      "default": 80,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "label": "网格间距",
      "min": 20,
      "max": 60,
      "step": 5,
      "default": 30,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "卡片样式"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "卡片背景色",
      "default": "#F1EFEE"
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "卡片边框色",
      "default": "#e0e0e0"
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "label": "卡片圆角",
      "min": 0,
      "max": 20,
      "step": 2,
      "default": 8,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "card_padding",
      "label": "卡片内边距",
      "min": 20,
      "max": 50,
      "step": 5,
      "default": 30,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "系列标题"
    },
    {
      "type": "range",
      "id": "series_title_size",
      "label": "系列标题字体大小",
      "min": 16,
      "max": 24,
      "step": 1,
      "default": 18,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "series_title_weight",
      "label": "系列标题字体粗细",
      "options": [
        {
          "value": "400",
          "label": "正常"
        },
        {
          "value": "500",
          "label": "中等"
        },
        {
          "value": "600",
          "label": "半粗"
        },
        {
          "value": "700",
          "label": "粗体"
        }
      ],
      "default": "600"
    },
    {
      "type": "color",
      "id": "series_title_color",
      "label": "系列标题颜色",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "系列描述"
    },
    {
      "type": "range",
      "id": "series_description_size",
      "label": "系列描述字体大小",
      "min": 12,
      "max": 18,
      "step": 1,
      "default": 14,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "series_description_color",
      "label": "系列描述颜色",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "按钮样式"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "按钮边框色",
      "default": "#cccccc"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "按钮文字色",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "button_hover_bg",
      "label": "按钮悬停背景色",
      "default": "#C22E35"
    },
    {
      "type": "color",
      "id": "button_hover_text",
      "label": "按钮悬停文字色",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_text_size",
      "label": "按钮字体大小",
      "min": 12,
      "max": 16,
      "step": 1,
      "default": 14,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "button_text_weight",
      "label": "按钮字体粗细",
      "options": [
        {
          "value": "400",
          "label": "正常"
        },
        {
          "value": "500",
          "label": "中等"
        },
        {
          "value": "600",
          "label": "半粗"
        }
      ],
      "default": "500"
    },
    {
      "type": "header",
      "content": "空状态设置"
    },
    {
      "type": "text",
      "id": "empty_title",
      "label": "空状态标题",
      "default": "暂无展品系列"
    },
    {
      "type": "text",
      "id": "empty_description",
      "label": "空状态描述",
      "default": "请先创建展品系列以展示内容"
    }
  ],
  "presets": [
    {
      "name": "展品系列展示"
    }
  ]
}
{% endschema %}
