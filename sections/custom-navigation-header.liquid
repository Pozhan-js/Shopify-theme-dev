<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-cart-notification.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-mega-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'custom-header.css' | asset_url }}" media="print" onload="this.media='all'">

<style>
  :root {
    --custom-theme-color: #DE9B57;
    --custom-theme-color-rgb: 222, 155, 87;
  }

  .custom-header {
    background-color: rgb(var(--color-background));
    border-bottom: 1px solid rgba(var(--color-foreground), 0.08);
  }

  .custom-header__navigation {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .custom-header__logo {
    flex-shrink: 0;
  }

  .custom-header__logo img {
    max-height: 60px;
    width: auto;
  }

  .custom-header__menu {
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  .custom-header__menu-item {
    color: rgba(var(--color-foreground), 0.85);
    text-decoration: none;
    font-weight: 500;
    font-size: 1.1rem;
    padding: 0.5rem 1rem;
    position: relative;
    transition: all 0.3s ease;
  }

  .custom-header__menu-item:hover {
    color: var(--custom-theme-color);
  }

  .custom-header__menu-item::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 2px;
    background-color: var(--custom-theme-color);
    transition: all 0.3s ease;
    transform: translateX(-50%);
  }

  .custom-header__menu-item:hover::after {
    width: 100%;
  }

  .custom-header__menu-item--active {
    color: var(--custom-theme-color) !important;
  }

  .custom-header__menu-item--active::after {
    width: 100%;
    background-color: var(--custom-theme-color);
  }

  .custom-header__icons {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .custom-header__icon {
    color: rgba(var(--color-foreground), 0.75);
    transition: color 0.3s ease;
  }

  .custom-header__icon:hover {
    color: var(--custom-theme-color);
  }

  .custom-header__mobile-toggle {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
  }

  @media screen and (max-width: 768px) {
    .custom-header__menu {
      display: none;
    }

    .custom-header__mobile-toggle {
      display: block;
    }

    .custom-header__navigation {
      padding: 1rem;
    }
  }

  .custom-header__mobile-menu {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: rgb(var(--color-background));
    border-top: 1px solid rgba(var(--color-foreground), 0.08);
    padding: 1rem;
  }

  .custom-header__mobile-menu.active {
    display: block;
  }

  .custom-header__mobile-menu-item {
    display: block;
    padding: 0.75rem 1rem;
    color: rgba(var(--color-foreground), 0.85);
    text-decoration: none;
    border-bottom: 1px solid rgba(var(--color-foreground), 0.05);
  }

  .custom-header__mobile-menu-item:hover {
    color: var(--custom-theme-color);
    background-color: rgba(var(--color-foreground), 0.02);
  }

  .custom-header__mobile-menu-item--active {
    color: var(--custom-theme-color);
    background-color: rgba(var(--color-foreground), 0.05);
  }
</style>

<div class="custom-header color-{{ section.settings.color_scheme }} gradient">
  <nav class="custom-header__navigation">
    <div class="custom-header__logo">
      {%- if settings.logo != blank -%}
        <a href="{{ routes.root_url }}">
          <img src="{{ settings.logo | image_url: width: 300 }}" 
               alt="{{ settings.logo.alt | default: shop.name }}" 
               height="60">
        </a>
      {%- else -%}
        <a href="{{ routes.root_url }}" class="h2">{{ shop.name }}</a>
      {%- endif -%}
    </div>

    <div class="custom-header__menu">
      {%- for link in linklists[section.settings.menu].links -%}
        <a href="{{ link.url }}" 
           class="custom-header__menu-item{% if link.active %} custom-header__menu-item--active{% endif %}"
           {% if link.active %}aria-current="page"{% endif %}>
          {{ link.title }}
        </a>
      {%- endfor -%}
    </div>

    <div class="custom-header__icons">
      {%- if shop.customer_accounts_enabled -%}
        <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" 
           class="custom-header__icon" 
           rel="nofollow">
          <span class="svg-wrapper">{{ 'icon-account.svg' | inline_asset_content }}</span>
        </a>
      {%- endif -%}

      <a href="{{ routes.cart_url }}" class="custom-header__icon">
        <span class="svg-wrapper">
          {% if cart == empty %}
            {{ 'icon-cart-empty.svg' | inline_asset_content }}
          {% else %}
            {{ 'icon-cart.svg' | inline_asset_content }}
          {% endif %}
        </span>
        {%- if cart != empty -%}
          <span class="cart-count-bubble">{{ cart.item_count }}</span>
        {%- endif -%}
      </a>

      <button class="custom-header__mobile-toggle" aria-label="Toggle menu">
        <span class="svg-wrapper">{{ 'icon-hamburger.svg' | inline_asset_content }}</span>
      </button>
    </div>
  </nav>

  <div class="custom-header__mobile-menu">
    {%- for link in linklists[section.settings.menu].links -%}
      <a href="{{ link.url }}" 
         class="custom-header__mobile-menu-item{% if link.active %} custom-header__mobile-menu-item--active{% endif %}"
         {% if link.active %}aria-current="page"{% endif %}>
        {{ link.title }}
      </a>
    {%- endfor -%}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileToggle = document.querySelector('.custom-header__mobile-toggle');
    const mobileMenu = document.querySelector('.custom-header__mobile-menu');
    
    if (mobileToggle && mobileMenu) {
      mobileToggle.addEventListener('click', function() {
        mobileMenu.classList.toggle('active');
      });
    }
  });
</script>

{% schema %}
{
  "name": "Custom Navigation Header",
  "class": "custom-header-section",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menu"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Navigation Colors"
    },
    {
      "type": "color",
      "id": "theme_color",
      "label": "Theme Color",
      "default": "#DE9B57"
    },
    {
      "type": "color",
      "id": "hover_color",
      "label": "Hover Color",
      "default": "#DE9B57"
    },
    {
      "type": "color",
      "id": "active_color",
      "label": "Active Color",
      "default": "#DE9B57"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Padding top",
      "default": 15
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Padding bottom",
      "default": 15
    }
  ],
  "presets": [
    {
      "name": "Custom Navigation Header",
      "category": "Header"
    }
  ]
}
{% endschema %}
